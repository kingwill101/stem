"use strict";(globalThis.webpackChunksite=globalThis.webpackChunksite||[]).push([[2795],{505:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"workers/worker-control","title":"Worker Control","description":"Stem exposes a broker-backed control plane so operators can inspect, revoke, and","source":"@site/docs/workers/worker-control.md","sourceDirName":"workers","slug":"/workers/control","permalink":"/stem/workers/control","draft":false,"unlisted":false,"editUrl":"https://github.com/kingwill101/stem/tree/main/.site/docs/docs/workers/worker-control.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"Worker Control","sidebar_label":"Worker Control CLI","sidebar_position":1,"slug":"/workers/control"},"sidebar":"docs","previous":{"title":"Programmatic Usage","permalink":"/stem/workers/programmatic"},"next":{"title":"Daemonization","permalink":"/stem/workers/daemonization"}}');var t=r(4848),i=r(8453);const o={title:"Worker Control",sidebar_label:"Worker Control CLI",sidebar_position:1,slug:"/workers/control"},a=void 0,l={},c=[{value:"Remote control primer",id:"remote-control-primer",level:2},{value:"CLI Overview",id:"cli-overview",level:2},{value:"Quick Examples",id:"quick-examples",level:3},{value:"Autoscaling Concurrency",id:"autoscaling-concurrency",level:2},{value:"CLI Multi-Instance Management",id:"cli-multi-instance-management",level:2},{value:"Worker Healthcheck",id:"worker-healthcheck",level:2},{value:"Worker Diagnostics",id:"worker-diagnostics",level:2},{value:"Persistent Revokes",id:"persistent-revokes",level:2},{value:"Termination Semantics",id:"termination-semantics",level:2},{value:"Inline vs isolate handlers",id:"inline-vs-isolate-handlers",level:3},{value:"Inline handler example",id:"inline-handler-example",level:3},{value:"Isolate handler example",id:"isolate-handler-example",level:3},{value:"Cooperative checkpoints for isolate handlers",id:"cooperative-checkpoints-for-isolate-handlers",level:3},{value:"Shutdown Modes and Lifecycle Guards",id:"shutdown-modes-and-lifecycle-guards",level:2},{value:"Configuration Summary",id:"configuration-summary",level:2},{value:"Additional Resources",id:"additional-resources",level:2}];function d(e){const n={code:"code",em:"em",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"Stem exposes a broker-backed control plane so operators can inspect, revoke, and\ncoordinate workers without restarts. This guide walks through the CLI surface,\nrevocation durability, and termination semantics for inline vs isolate handlers."}),"\n",(0,t.jsx)(n.h2,{id:"remote-control-primer",children:"Remote control primer"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Inspect"})," commands read worker state (",(0,t.jsx)(n.code,{children:"stem worker stats"}),", ",(0,t.jsx)(n.code,{children:"stem worker inspect"}),")."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Control"})," commands mutate state (",(0,t.jsx)(n.code,{children:"stem worker revoke"}),", ",(0,t.jsx)(n.code,{children:"stem worker shutdown"}),")."]}),"\n",(0,t.jsxs)(n.li,{children:["Commands broadcast to all workers unless you pass ",(0,t.jsx)(n.code,{children:"--worker"})," to target\nspecific IDs."]}),"\n",(0,t.jsxs)(n.li,{children:["Use ",(0,t.jsx)(n.code,{children:"--namespace"})," to match the control namespace used by your workers."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"cli-overview",children:"CLI Overview"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Command"}),(0,t.jsx)(n.th,{children:"Purpose"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"stem worker ping"})}),(0,t.jsx)(n.td,{children:"Broadcast a ping and aggregate worker responses."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"stem worker inspect"})}),(0,t.jsx)(n.td,{children:"List in-flight tasks (and optional revoke cache) per worker."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"stem worker stats"})}),(0,t.jsx)(n.td,{children:"Summarize inflight counts, queue depth, and metadata."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"stem worker revoke"})}),(0,t.jsx)(n.td,{children:"Persist revocations and broadcast terminate/best-effort revokes."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"stem worker shutdown"})}),(0,t.jsx)(n.td,{children:"Request warm/soft/hard shutdown via the control channel."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"stem worker status"})}),(0,t.jsx)(n.td,{children:"Stream heartbeats or snapshot the backend (existing command)."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"stem worker healthcheck"})}),(0,t.jsx)(n.td,{children:"Probe worker processes for readiness/liveness."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"stem worker diagnose"})}),(0,t.jsx)(n.td,{children:"Run local diagnostics for pid/log/env configuration issues."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"stem worker multi"})}),(0,t.jsx)(n.td,{children:"Manage multiple worker processes (start/stop/restart/status)."})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:["Use ",(0,t.jsx)(n.code,{children:"--namespace"})," to target non-default control namespaces. Omitting ",(0,t.jsx)(n.code,{children:"--worker"}),"\nbroadcasts to every worker. All commands honour the same environment variables as\n",(0,t.jsx)(n.code,{children:"stem health"})," (",(0,t.jsx)(n.code,{children:"STEM_BROKER_URL"}),", ",(0,t.jsx)(n.code,{children:"STEM_RESULT_BACKEND_URL"}),", TLS/signing flags)."]}),"\n",(0,t.jsx)(n.h3,{id:"quick-examples",children:"Quick Examples"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Ping a subset of workers by identifier\nstem worker ping --worker worker-a --worker worker-b\n\n# Inspect all workers (JSON output)\nstem worker inspect --json\n\n# Revoke a task and request termination\nstem worker revoke --task 1761057... --terminate\n"})}),"\n",(0,t.jsxs)(n.p,{children:["For a runnable lab that exercises ping/stats/revoke/shutdown against real\nworkers, see ",(0,t.jsx)(n.code,{children:"example/worker_control_lab"})," in the repository."]}),"\n",(0,t.jsx)(n.h2,{id:"autoscaling-concurrency",children:"Autoscaling Concurrency"}),"\n",(0,t.jsxs)(n.p,{children:["Workers can autoscale their isolate pools between configured minimum and\nmaximum bounds. Enable the evaluator by passing ",(0,t.jsx)(n.code,{children:"WorkerAutoscaleConfig"})," to the\nworker constructor:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dart",metastring:"file=<rootDir>/../packages/stem/example/docs_snippets/lib/worker_control.dart#worker-control-autoscale",children:"final worker = Worker(\n  broker: _autoscaleBroker,\n  registry: SimpleTaskRegistry(),\n  backend: _autoscaleBackend,\n  queue: 'critical',\n  concurrency: 12,\n  autoscale: const WorkerAutoscaleConfig(\n    enabled: true,\n    minConcurrency: 2,\n    maxConcurrency: 12,\n    scaleUpStep: 2,\n    scaleDownStep: 1,\n    idlePeriod: Duration(seconds: 45),\n    tick: Duration(milliseconds: 250),\n  ),\n);\n"})}),"\n",(0,t.jsxs)(n.p,{children:["The autoscaler samples broker queue depth alongside inflight counts to decide\nwhen to scale. Metrics expose the current setting via\n",(0,t.jsx)(n.code,{children:"stem.worker.concurrency"}),", and ",(0,t.jsx)(n.code,{children:"stem worker stats --json"})," includes the live\n",(0,t.jsx)(n.code,{children:"activeConcurrency"})," value so dashboards can observe adjustments."]}),"\n",(0,t.jsxs)(n.p,{children:["See ",(0,t.jsx)(n.code,{children:"example/autoscaling_demo"})," for a queue-backlog scenario that triggers\nscale-up and scale-down events."]}),"\n",(0,t.jsx)(n.h2,{id:"cli-multi-instance-management",children:"CLI Multi-Instance Management"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"stem worker multi"})," orchestrates OS processes for worker nodes. It honours the\nsame placeholders as the service templates (",(0,t.jsx)(n.code,{children:"%n"}),", ",(0,t.jsx)(n.code,{children:"%h"}),", ",(0,t.jsx)(n.code,{children:"%I"}),", ",(0,t.jsx)(n.code,{children:"%d"}),") when\nexpanding PID/log/workdir templates and uses ",(0,t.jsx)(n.code,{children:"STEM_WORKER_COMMAND"})," (or\n",(0,t.jsx)(n.code,{children:"--command"}),"/",(0,t.jsx)(n.code,{children:"--command-line"}),") for the executable."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'export STEM_WORKER_COMMAND="/usr/bin/stem-worker"\nstem worker multi start alpha beta \\\n  --pidfile=/var/run/stem/%n.pid \\\n  --logfile=/var/log/stem/%n.log \\\n  --env-file=/etc/stem/stem.env\n\nstem worker multi status alpha beta --pidfile=/var/run/stem/%n.pid\nstem worker multi stop alpha beta --pidfile=/var/run/stem/%n.pid\n'})}),"\n",(0,t.jsxs)(n.p,{children:["The CLI auto-creates directories and exposes ",(0,t.jsx)(n.code,{children:"STEM_WORKER_NODE"}),",\n",(0,t.jsx)(n.code,{children:"STEM_WORKER_PIDFILE"}),", and ",(0,t.jsx)(n.code,{children:"STEM_WORKER_LOGFILE"})," to the launched process so apps\ncan discover their runtime context."]}),"\n",(0,t.jsx)(n.h2,{id:"worker-healthcheck",children:"Worker Healthcheck"}),"\n",(0,t.jsxs)(n.p,{children:["Use ",(0,t.jsx)(n.code,{children:"stem worker healthcheck"})," inside systemd ",(0,t.jsx)(n.code,{children:"ExecStartPost="}),", Kubernetes probes,\nor shell scripts to determine whether a worker process is running:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"stem worker healthcheck \\\n  --node alpha \\\n  --pidfile=/var/run/stem/alpha.pid \\\n  --logfile=/var/log/stem/alpha.log \\\n  --json\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Exit code ",(0,t.jsx)(n.code,{children:"0"})," indicates the PID file exists and the process is alive. The JSON\npayload includes the pid, timestamp captured from the PID file, and the uptime\nin seconds."]}),"\n",(0,t.jsx)(n.h2,{id:"worker-diagnostics",children:"Worker Diagnostics"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"stem worker diagnose"})," performs common checks (PID/log directories, stale PID\nfiles, environment file parsing) to help troubleshoot daemonization issues:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"stem worker diagnose \\\n  --pidfile=/var/run/stem/alpha.pid \\\n  --logfile=/var/log/stem/alpha.log \\\n  --env-file=/etc/stem/stem.env\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Warnings and errors are printed for missing directories, unparseable PIDs, and\nother configuration gaps. Use ",(0,t.jsx)(n.code,{children:"--json"})," when integrating with tooling."]}),"\n",(0,t.jsx)(n.h2,{id:"persistent-revokes",children:"Persistent Revokes"}),"\n",(0,t.jsx)(n.p,{children:"Revocations are durable so new workers or restarts continue honouring them. The\nCLI resolves the backing store in this order:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"STEM_REVOKE_STORE_URL"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"STEM_RESULT_BACKEND_URL"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"STEM_BROKER_URL"})}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Supported schemes: Redis (",(0,t.jsx)(n.code,{children:"redis://"}),", ",(0,t.jsx)(n.code,{children:"rediss://"}),"), Postgres (",(0,t.jsx)(n.code,{children:"postgres://"}),",\n",(0,t.jsx)(n.code,{children:"postgresql://"}),"), a newline-delimited file (",(0,t.jsx)(n.code,{children:"file:///path/to/revokes.stem"})," or\nbare path), and in-memory (",(0,t.jsx)(n.code,{children:"memory://"})," \u2013 useful for tests). Workers hydrate the\nrevocation cache at startup, prune expired records, and apply new control\nmessages. The CLI writes through the store ",(0,t.jsx)(n.em,{children:"before"})," broadcasting control\nmessages to guarantee durability precedes visibility."]}),"\n",(0,t.jsx)(n.h2,{id:"termination-semantics",children:"Termination Semantics"}),"\n",(0,t.jsx)(n.h3,{id:"inline-vs-isolate-handlers",children:"Inline vs isolate handlers"}),"\n",(0,t.jsxs)(n.p,{children:["Stem executes tasks either inline (worker main isolate) or in dedicated child\nisolates when a handler exposes an ",(0,t.jsx)(n.code,{children:"isolateEntrypoint"}),". Inline handlers share the\nworker event loop and can be interrupted immediately at the next checkpoint.\nIsolate handlers communicate with the worker only when they emit control signals\n(heartbeat, lease extension, progress). That difference governs how quickly a\n",(0,t.jsx)(n.code,{children:"--terminate"})," revoke takes effect."]}),"\n",(0,t.jsxs)(n.p,{children:["If you are using ",(0,t.jsx)(n.code,{children:"FunctionTaskHandler"}),", keep execution inline by passing\n",(0,t.jsx)(n.code,{children:"runInIsolate: false"})," or using the ",(0,t.jsx)(n.code,{children:"FunctionTaskHandler.inline(...)"})," factory\nwhen the entrypoint captures state that cannot cross isolate boundaries."]}),"\n",(0,t.jsx)(n.h3,{id:"inline-handler-example",children:"Inline handler example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dart",metastring:'title="tasks/inline_report_task.dart" file=<rootDir>/../packages/stem/example/docs_snippets/lib/worker_control.dart#worker-control-inline',children:"class InlineReportTask extends TaskHandler<void> {\n  @override\n  String get name => 'tasks.inline-report';\n\n  @override\n  TaskOptions get options => const TaskOptions(maxRetries: 0);\n\n  @override\n  Future<void> call(TaskContext context, Map<String, Object?> args) async {\n    for (final chunk in args['chunks'] as List<String>) {\n      await processChunk(chunk);\n      context.heartbeat();\n    }\n  }\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"isolate-handler-example",children:"Isolate handler example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dart",metastring:'title="tasks/image_render_task.dart" file=<rootDir>/../packages/stem/example/docs_snippets/lib/worker_control.dart#worker-control-isolate',children:"class ImageRenderTask extends TaskHandler<void> {\n  @override\n  String get name => 'tasks.render-image';\n\n  @override\n  TaskOptions get options => const TaskOptions(maxRetries: 0);\n\n  @override\n  TaskEntrypoint? get isolateEntrypoint => renderImageEntrypoint;\n\n  @override\n  Future<void> call(TaskContext context, Map<String, Object?> args) async {}\n}\n\nFuture<void> renderImageEntrypoint(\n  TaskInvocationContext ctx,\n  Map<String, Object?> args,\n) async {\n  final tiles = args['tiles'] as List<ImageTile>;\n  for (var i = 0; i < tiles.length; i++) {\n    await renderTile(tiles[i]);\n\n    if (i % 5 == 0) {\n      ctx.heartbeat();\n      ctx.progress(i / tiles.length);\n    }\n  }\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"stem worker revoke --terminate"})," throws ",(0,t.jsx)(n.code,{children:"TaskRevokedException"})," the next time an\ninline handler calls ",(0,t.jsx)(n.code,{children:"TaskContext.heartbeat"}),", ",(0,t.jsx)(n.code,{children:"extendLease"}),", or ",(0,t.jsx)(n.code,{children:"progress"}),",\nallowing the worker to cancel and record the task as cancelled. Isolate handlers\nmust emit cooperative checkpoints (heartbeat/lease/progress) to be interrupted;\notherwise they finish naturally."]}),"\n",(0,t.jsx)(n.h3,{id:"cooperative-checkpoints-for-isolate-handlers",children:"Cooperative checkpoints for isolate handlers"}),"\n",(0,t.jsxs)(n.p,{children:["Make sure isolate entrypoints call one of the cooperative helpers inside any\nlong-running loop. Each helper throws ",(0,t.jsx)(n.code,{children:"TaskRevokedException"})," when a terminate\nrevoke is pending, which lets the handler fail fast."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dart",metastring:'title="tasks/crunch.dart" file=<rootDir>/../packages/stem/example/docs_snippets/lib/worker_control.dart#worker-control-crunch',children:"Future<void> crunch(\n  TaskInvocationContext ctx,\n  Map<String, Object?> args,\n) async {\n  final items = args['items'] as List<Object?>;\n  for (var i = 0; i < items.length; i++) {\n    await process(items[i]);\n\n    if (i % 10 == 0) {\n      ctx.heartbeat();\n      ctx.progress(i / items.length);\n    }\n  }\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:["For CPU-bound workloads, batch work or insert ",(0,t.jsx)(n.code,{children:"await Future<void>.delayed(...)"}),"\nso the isolate yields periodically. Without checkpoints the worker cannot\npre-empt the task until it returns on its own."]}),"\n",(0,t.jsxs)(n.p,{children:["Operators should pair ",(0,t.jsx)(n.code,{children:"--terminate"})," with ",(0,t.jsx)(n.code,{children:"stem worker inspect"})," to monitor\ninflight tasks that still need to quiesce. If a handler never emits heartbeats,\nadd them or implement explicit cancellation logic."]}),"\n",(0,t.jsx)(n.h2,{id:"shutdown-modes-and-lifecycle-guards",children:"Shutdown Modes and Lifecycle Guards"}),"\n",(0,t.jsxs)(n.p,{children:["Use ",(0,t.jsx)(n.code,{children:"stem worker shutdown --mode warm|soft|hard"})," to trigger runtime shutdowns:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Warm"})," stops fetching new deliveries and drains current work."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Soft"})," issues terminate revocations, then escalates to hard after the\nconfigured grace period if tasks continue running."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Hard"})," immediately requeues active deliveries and terminates isolates."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["By default, workers install signal handlers that map ",(0,t.jsx)(n.code,{children:"SIGTERM"})," to warm,\n",(0,t.jsx)(n.code,{children:"SIGINT"})," to soft, and ",(0,t.jsx)(n.code,{children:"SIGQUIT"})," to hard. Disable them by constructing the worker\nwith ",(0,t.jsx)(n.code,{children:"WorkerLifecycleConfig(installSignalHandlers: false)"})," when embedding Stem\ninside a larger host that already owns signal routing."]}),"\n",(0,t.jsx)(n.p,{children:"Lifecycle guards can also recycle isolates automatically:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-dart",metastring:"file=<rootDir>/../packages/stem/example/docs_snippets/lib/worker_control.dart#worker-control-lifecycle",children:"final lifecycleWorker = Worker(\n  broker: _lifecycleBroker,\n  registry: SimpleTaskRegistry(),\n  backend: _lifecycleBackend,\n  lifecycle: const WorkerLifecycleConfig(\n    maxTasksPerIsolate: 500,\n    maxMemoryPerIsolateBytes: 512 * 1024 * 1024,\n  ),\n);\n"})}),"\n",(0,t.jsx)(n.p,{children:"Recycling occurs after the active task finishes; the worker logs the recycle\nreason and spawns a fresh isolate before accepting new work."}),"\n",(0,t.jsx)(n.h2,{id:"configuration-summary",children:"Configuration Summary"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Variable"}),(0,t.jsx)(n.th,{children:"Purpose"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"STEM_REVOKE_STORE_URL"})}),(0,t.jsx)(n.td,{children:"Override the revoke store target (defaults to backend or broker)."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"STEM_CONTROL_NAMESPACE"})}),(0,t.jsx)(n.td,{children:"Override the control namespace (defaults to heartbeat namespace)."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"STEM_WORKER_NAMESPACE"})}),(0,t.jsx)(n.td,{children:"Logical grouping for worker IDs/queues."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"STEM_CONTROL_TIMEOUT"})}),(0,t.jsxs)(n.td,{children:["Default control command timeout (e.g. ",(0,t.jsx)(n.code,{children:"5s"}),")."]})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:["Set ",(0,t.jsx)(n.code,{children:"STEM_REVOKE_STORE_URL"})," to the datastore you want to back revocations. For\nexample, to use Postgres alongside the result backend:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"export STEM_REVOKE_STORE_URL=postgres://stem:secret@db:5432/stem\n"})}),"\n",(0,t.jsx)(n.h2,{id:"additional-resources",children:"Additional Resources"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"stem worker --help"})," \u2013 built-in CLI usage for each subcommand."]}),"\n",(0,t.jsxs)(n.li,{children:["The ",(0,t.jsx)(n.code,{children:"examples/"})," directory in the Stem repository demonstrates control\ncommands alongside worker lifecycle signals."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>a});var s=r(6540);const t={},i=s.createContext(t);function o(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);